<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Builder</title>
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .drag-over { border-color: #eab308 !important; background-color: rgba(234, 179, 8, 0.1) !important; }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <div class="flex h-screen">

        <!-- Left Sidebar: Component Library -->
        <div class="w-64 bg-gray-800 border-r border-gray-700 p-4 overflow-y-auto flex flex-col">
            <h2 class="text-lg font-bold mb-3 text-yellow-400">Components</h2>
            <div id="component-library" hx-get="/api/components" hx-trigger="load" hx-swap="innerHTML">
                <div class="text-gray-500 text-sm">Loading...</div>
            </div>

            <div class="mt-auto pt-4 border-t border-gray-700 space-y-2">
                <button onclick="newProject()" class="w-full bg-gray-700 text-sm py-2 rounded hover:bg-gray-600">New Project</button>
                <button onclick="saveProject()" class="w-full bg-gray-700 text-sm py-2 rounded hover:bg-gray-600">Save Project</button>
                <button onclick="loadProject()" class="w-full bg-gray-700 text-sm py-2 rounded hover:bg-gray-600">Load Project</button>
                <button onclick="exportHTML()" class="w-full bg-yellow-500 text-black text-sm font-bold py-2 rounded hover:bg-yellow-400">Export HTML</button>
            </div>
        </div>

        <!-- Center: Canvas -->
        <div class="flex-1 flex flex-col">
            <div class="bg-gray-800 border-b border-gray-700 px-4 py-2 flex items-center justify-between">
                <span id="project-name" class="text-sm text-gray-400">No project loaded</span>
                <span class="text-xs text-gray-500" id="component-count">0 components</span>
            </div>
            <div id="canvas"
                 ondrop="onDrop(event)" ondragover="onDragOver(event)" ondragleave="onDragLeave(event)"
                 class="flex-1 overflow-y-auto p-6 bg-gray-100 border-2 border-dashed border-gray-300 m-4 rounded-lg transition">
                <div id="canvas-empty" class="flex items-center justify-center h-full text-gray-400">
                    Drag components here to start building
                </div>
            </div>
        </div>

        <!-- Right: Property Panel -->
        <div class="w-80 bg-gray-800 border-l border-gray-700 p-4 overflow-y-auto">
            <h2 class="text-lg font-bold mb-3 text-gray-300">Properties</h2>
            <div id="property-panel">
                <p class="text-sm text-gray-500">Select a component to edit its properties</p>
            </div>
        </div>
    </div>

    <script src="assets/js/builder.js"></script>
</body>
</html>
